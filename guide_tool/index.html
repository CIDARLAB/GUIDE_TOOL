<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.min.js"></script>
	<link href="http://www.shz260.com/css/bootstrap.min.css" rel="stylesheet">
	<script type = "text/javascript" src = "js/canvas_auto.js"></script>
	<script type = "text/javascript" src = "js/sidebar.js"></script>
	<script type = "text/javascript" src = "js/mode_op.js"></script>
	<script type = "text/javascript" src = "js/result_text.js"></script>
	<script type = "text/javascript" src = "js/upload_read.js"></script>
	<script type = "text/javascript" src = "js/drawCanvas.js"></script>
	<script type = "text/javascript" src = "js/pointchoose.js"></script>
	<script type = "text/javascript" src = "js/content-change.js"></script>
	<link rel="stylesheet" type="text/css" href="css/sidebar.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<title>uF guide tool</title>
</head>
<body>
	<!--侧栏界面设计-->
	<div id="mySidenav" class="sidenav">
	  <!-- <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a> -->
	  <button class="button" id="side1" style="color: #111111;" onclick="hide();show(1);color(1)">Step 1</button>
	  <button class="button" id="side2" onclick="hide();show(2);color(2)">Step 2</button>
	  <button class="button" id="side3" onclick="hide();show(3);color(3)">Step 3</button>
	  <button class="button" id="side4" onclick="hide();show(4);color(4)">Step 4</button>
	  <button class="button" id="side5" onclick="hide();show(5);color(5)">Step 5</button>
	</div>
	 
	<div id="main" style="position: relative; left: 100px;">
		<div style="width: 480px; float: left; margin-right: 10px; position: relative;">
			<!-- <button class="button" id="back" onclick="openNav();color(step)">Other steps</button> -->
			<div id="step1">
				<h1>Step 1</h1>
				<h3>Upload 3Duf design file in json. Click upload below.</h3>
				<br>
				<input type="file" name="file" id="file" class="inputfile" accept=".json" onchange="read()"/>
				<label for="file" style="line-height: 36px; text-align: center;" >Upload</label>
				<br>
				<!-- <button class="button" onclick="">Analyse it!</button> -->
				<table border="1" align="center" id="jsonshow" style="margin-bottom: 20px;">
					<tr>
						<th style="padding:5px 10px;">Type of Elements</th>
						<th style="padding:5px 10px;">Numbers</th>
					</tr>
					<tr> 
						<td> <h4>Port</h4> </td> 
						<td> <h4 id="size1">0</h4> </td>
					</tr>
					<tr>
						<td> <h4>Pump</h4> </td> 
						<td> <h4 id="size2">0</h4> </td>
					</tr>
					<tr> 
						<td> <h4>Valve</h4> </td> 
						<td> <h4 id="size3">0</h4> </td>
					</tr>
					<tr>
						<td> <h4>Via</h4> </td> 
						<td> <h4 id="size4">0</h4> </td>
					</tr>
					<tr>
						<td> <h4>Chamber</h4> </td> 
						<td> <h4 id="size5">0</h4> </td>
					</tr>
					<tr>
						<td> <h4>Port_control</h4> </td> 
						<td> <h4 id="size6">0</h4> </td>
					</tr>
					<tr>
						<td> <h4>Pump_control</h4> </td> 
						<td> <h4 id="size7">0</h4> </td>
					</tr>
					<tr>
						<td> <h4>Valve_control</h4> </td> 
						<td> <h4 id="size8">0</h4> </td>
					</tr>
				</table>
				<!-- <button class="button" onclick="">Draw Now!</button> -->
			</div>
			<div id="step2" style="display: none;">
				<h1>Step 2</h1>
				<h3>Select button blow to check where they are</h3>
				<br>
				<table border="1" align="center" id="element_types" style="margin-bottom: 20px;">
					<tr>
						<th style="padding:5px 10px;">Types of Elements</th>
						<th style="padding:5px 10px;">Numbers</th>
					</tr>
					<tr>
						<td> <button class="button" id="port2" onclick="color_points(1)">Port</button> </td> 
						<td> <h4 id="num1">0</h4> </td>
					</tr>
					<tr>
						<td> <button class="button" id="pump2" onclick="color_points(2)">Pump</button> </td> 
						<td> <h4 id="num2">0</h4> </td>
					</tr>
					<tr> 
						<td> <button class="button" id="valve2" onclick="color_points(3)">Valve</button> </td> 
						<td> <h4 id="num3">0</h4> </td>
					</tr>
					<tr>
						<td> <button class="button" id="via2" onclick="color_points(4)">Via</button> </td> 
						<td> <h4 id="num4">0</h4> </td>
					</tr>
					<tr>
						<td> <button class="button" id="chamber2" onclick="color_points(5)">Chamber</button> </td> 
						<td> <h4 id="num5">0</h4> </td>
					</tr>
					<tr>
						<td> <button class="button" id="port_c2" onclick="color_points(6)">Port_control</button> </td> 
						<td> <h4 id="num6">0</h4> </td>
					</tr>
					<tr>
						<td> <button class="button" id="pump_c2" onclick="color_points(7)">Pump_control</button> </td> 
						<td> <h4 id="num7">0</h4> </td>
					</tr>
					<tr>
						<td> <button class="button" id="valve_c2" onclick="color_points(8)">Valve_control</button> </td> 
						<td> <h4 id="num8">0</h4> </td>
					</tr>
				</table>
			</div>
			<div id="step3" style="display: none;">
				<h1>Step 3</h1>
				<h3>Checkout for examples of operation modes you can play, then click next to asssign IDs to your system</h3>
				<br>
				<div style="width:450px; margin-left: 10px; float:left; display: inline-block;">
					<h2>Modes Descriptions</h2>
					<br>
				    <h4 id="modes_introduction">
						0-Priming MCs, MCMs, MFMs and ALL Channels of the Board using MIX<br><br>
				        1-Loading cells in each inlet independently from MUX<br><br>
				        2-Cleaning of all main channels and the reservoir after cell loading<br><br>
				        3-Filling in the reservoirs with no operation to bring anything to any inlets (only reservoirs), followed by cleaning of needed<br><br>
				        4-Cleaning of all main channels after reservoir filling<br><br>
				        5-Both inlets of a MCM receive media from the reservoirs independent and simultaneously with MUX closed<br><br>
				        6-Feeding inlets from reservoirs stopped, then reservoirs receive media from MUX one at the time for re-filing<br><br>
				        7-Final cleaning of all channels after experiments are gone, and MCMs are removed. (Open all of the valves)<br><br>
				    </h4>
					<button class="mode" id="mode3_0" onclick="mode_color_3(0);mode_sample(0)">0</button>
					<button class="mode" id="mode3_1" onclick="mode_color_3(1);mode_sample(1)">1</button>
					<button class="mode" id="mode3_2" onclick="mode_color_3(2);mode_sample(2)">2</button>
					<button class="mode" id="mode3_3" onclick="mode_color_3(3);mode_sample(3)">3</button>
					<button class="mode" id="mode3_4" onclick="mode_color_3(4);mode_sample(4)">4</button>
					<button class="mode" id="mode3_5" onclick="mode_color_3(5);mode_sample(5)">5</button>
					<button class="mode" id="mode3_6" onclick="mode_color_3(6);mode_sample(6)">6</button>
					<button class="mode" id="mode3_7" onclick="mode_color_3(7);mode_sample(7)">7</button>
					
				</div>
			</div>
			<div id="step4" style="display: none;">
				<h1>Step 4</h1>
				<h3>Choose inlets and outlets. Check what the path looks like.</h3>
				<h4 id="inlet">Inlets: </h4>
				<h4 id="outlet">Outlets: </h4>
				<button onclick="color_points(1)" class="button" id="choose" style="float: left; margin-right: 20px;"> Choose points</button>
				<table border="1" align="center" id="element_types" style="margin-bottom: 20px;">
					<tr>
						<th>Port Id</th>
						<th>Comments</th>
					</tr>
					<tbody id="tb4-1">
						
					</tbody>
				</table>
				<button class="mode" id="mode0" onclick="mode_color(0)">0</button>
				<button class="mode" id="mode1" onclick="mode_color(1)">1</button>
				<button class="mode" id="mode2" onclick="mode_color(2)">2</button>
				<button class="mode" id="mode3" onclick="mode_color(3)">3</button>
				<button class="mode" id="mode4" onclick="mode_color(4)">4</button>
				<button class="mode" id="mode5" onclick="mode_color(5)">5</button>
				<button class="mode" id="mode6" onclick="mode_color(6)">6</button>
				<button class="mode" id="mode7" onclick="mode_color(7)">7</button>
				
				<br>
				<h4>Click once: select the mode</h4>
				<h4>Click twice: delete the chosen mode</h4>
				
				<div id="chosen_mode" >
					<p>Mode Description</p>
				</div>
				<button onclick="check_lets(2)" class="button" id="check" style="float: left; margin-right: 50px;"> Check !</button>
				<button onclick="refresh()" class="button" id="refresh"> Refresh !</button>
				<button onclick="check_lets(1);addlist()" class="button" id="addlist"> Add into list !</button>
				<table border="1" align="center" id="modetable" style="margin-bottom: 20px;">
					<tr>
						<th>Mode id</th>
						<th>Chosen ports</th>
					</tr>
					<tbody id="tb4-2">
						
					</tbody>
				</table>
				<button onclick="canvas_mode();hide();next_show();color(step)" class="button" id="checklist"> Check list  &&  Next!</button>
			</div>
			<div id="step5" style="display: none;">
				<h1>Step 5</h1>
				<br>
				<table border="1" align="center" id="table5" style="margin-bottom: 20px;">
					<thead>
						<th>mode</th>
						<th>Open Ports</th>
						<th>Close Ports</th>
					</thead>
					<tbody id="tb5">

					</tbody>
				</table>
				<br>
				<table border="1" align="center" id="table5-2" style="margin-bottom: 20px;">
					<thead>
						<th>Solenoid ID</th>
						<th>Ports</th>
					</thead>
					<tbody id="tb5-2">
						
					</tbody>
				</table>
				<p>Example output of the Last Situation</p>
				<table border="1" align="center" id="table5-2" style="margin-bottom: 20px;">
					<tbody id="tb5-3">
						
					</tbody>
				</table>
				<button class="button" id="dload" onclick="downloadTxt('control_solenoids.txt',index_ctrl_port)">Download Current Path</button>
			</div>
			<button class="button" id="next" onclick="hide();next_show();color(step)">Next</button>
		</div>
		<div style="position: relative; float: left; left: 50px;">
			<canvas id="myCanvas" width="1280px" height="850px" style="background: #dddddd; border:1px solid #aaaaaa; " onclick="choosepoint();add_row()"></canvas>
		</div>	
	</div>

	
</body>
</html>